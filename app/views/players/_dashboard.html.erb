<div class="md:grid md:grid-cols-4 md:gap-6 max-w-7xl mx-auto">
  <div class="mt-5 md:mt-0 md:col-span-1">
    <div class="w-full aspect-square bg-gray-300 rounded-[50%] flex justify-center items-center text-[100px] mt-6 border-8 border-gray-600 text-gray-600">
      <%= current_user.initials %>
    </div>
    <div class="w-full flex justify-center">
      <a data-modal-toggle="enterInviteCode" class="inline-flex items-center px-2.5 py-1.5 mt-4 border border-transparent text-lg font-medium rounded text-indigo-500 hover:text-indigo-700 cursor-pointer text-center">Enter Invite Code</a>
    </div>
  </div>

  <div class="mt-5 md:mt-0 md:col-span-3">
    <div class="mt-4">
      <ul id="tabs" class="inline-flex w-full px-1 pt-2 ">
        <li class="px-4 py-2 -mb-px font-semibold text-gray-900 border-b-2 border-blue-400"><a id="profile-tab" href="#profile">Profile</a></li>
        <li class="px-4 py-2 font-semibold text-gray-900"><a href="#teams">My Teams</a></li>
      </ul>
      <div id="tab-contents">
        <div id="profile" class="p-4">
          <%= render partial: "users/form", locals: { user: current_user } %>
        </div>
        <div id="teams" class="hidden p-4">
          <%= render "players/teams/index" %>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="enterInviteCode" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 w-full md:inset-0 h-modal md:h-full">

  <div class="relative p-4 w-full max-w-2xl h-full md:h-auto" data-controller="invite">
    <!-- Modal content -->
    <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
      <!-- Modal header -->
      <div class="flex justify-between items-start p-4 rounded-t border-b dark:border-gray-600">
        <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
          Enter Invite Code
        </h3>
        <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-toggle="enterInviteCode">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
        </button>
      </div>
      <!-- Modal body -->
      <div class="p-6 space-y-6">
        <input type="text" class="w-full px-2 py-2 text-sm border rounded-md focus:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-500" data-invite-target="inviteCode" data-action="input->invite#lookupInviteCode" />
        <div class="pb-4 text-center text-sm hidden" data-invite-target="teamNameContainer">
          You will be joining <span data-invite-target="teamName" class="text-blue-500 font-bold"></span>.
        </div>
        <div class="pb-4 text-center text-sm text-red-500 hidden" data-invite-target="error">
          Invite code invalid.
        </div>
      </div>
      <!-- Modal footer -->
      <div class="flex justify-end p-6 space-x-2 rounded-b border-t border-gray-200 dark:border-gray-600">
        <button data-invite-target="joinTeamButton" data-modal-toggle="enterInviteCode" type="button" class="disabled:bg-gray-400 disabled:hover:bg-gray-400 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800" data-action="click->invite#joinTeam">Join team</button>
      </div>
    </div>
  </div>
</div>

<script>
  var tabsContainer = document.querySelector("#tabs");
  var tabTogglers = tabsContainer.querySelectorAll("a");

  tabTogglers.forEach(function(toggler) {
    toggler.addEventListener("click", function(e) {
      e.preventDefault();

      let tabName = this.getAttribute("href");
      let tabContents = document.querySelector("#tab-contents");

      for (let i = 0; i < tabContents.children.length; i++) {
        tabTogglers[i].parentElement.classList.remove("border-blue-400", "border-b-4", "border-b-2", "-mb-px");
        tabContents.children[i].classList.remove("hidden");

        if ("#" + tabContents.children[i].id === tabName) {
          continue;
        }
        tabContents.children[i].classList.add("hidden");
      }
      e.target.parentElement.classList.add("border-blue-400", "border-b-4", "-mb-px");
    });
  });

  if (location.hash) {
    document.querySelector(`a[href='${location.hash}']`).click();
  } else {
    document.getElementById("profile-tab").click();
  }

</script>