<% if @tournaments.where(adhoc: false) %>
  <% @tournaments.where(adhoc: false).each do |tournament| %>
    <tr class="bg-grey">
      <% if current_user.has_role? "admin" %>
        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"><%= tournament&.created_by&.full_name if tournament&.created_by %></td>
      <% end %>
      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"><%= tournament.name %></td>
      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"><%= tournament.created_at.strftime("%b %e, %Y | %l:%M %p") %></td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= "#{tournament.city}, #{tournament.state}" %></td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= tournament&.players.count %></td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= tournament&.match_time ? tournament&.match_time / 60 : 0 %>m</td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= tournament&.pre_match_time %>s</td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= tournament&.court_names_pretty %></td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= tournament&.rounds_configured.join(', ') %></td>
      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= tournament&.rounds_finalized.join(', ') %></td>
      <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
      <% if tournament.rounds_configured.include?(1) %>
        <a href="<%= display_path(tournament.id, 1) %>" target="_blank">
          <button 
            class="inline-flex items-center px-2.5 py-0.5 border border-transparent text-sm font-medium rounded text-slate-700 bg-slate-200 hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500">
            Display Court <%= tournament.courts > 1 ? 1 : "" %>
          </button>
        </a>
      <% end %>
      <% if tournament.courts == 2 %>
        <a href="<%= display_path(tournament.id, 1) %>" target="_blank">
          <button 
            class="inline-flex items-center px-2.5 py-0.5 border border-transparent text-sm font-medium rounded text-slate-700 bg-slate-200 hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500">
            Display Court 2
          </button>
        </a>
      <% end %>
      <% if tournament.rounds_finalized.include?(tournament.rounds_configured.last.to_i) %>
        <a href="<%= results_tournament_path(tournament.id) %>" target="_blank">
          <button 
            class="inline-flex items-center px-2.5 py-0.5 border border-transparent text-sm font-medium rounded text-slate-700 bg-slate-200 hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500">
            Results
          </button>
        </a>
      <% end %>
        <a href="<%= edit_tournament_path(tournament.id) %>">
          <button 
            class="inline-flex items-center px-2.5 py-0.5 border border-transparent text-sm font-medium rounded text-slate-700 bg-slate-200 hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500">
            Edit
          </button>   
        </a>   
      </td>
    </tr>
  <% end %>
<% end%>
