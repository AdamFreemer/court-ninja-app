<div class="md:grid md:grid-cols-4 md:gap-6 max-w-7xl mx-auto">
  <div class="mt-5 md:mt-0 md:col-span-1">
    <div class="relative w-full aspect-square bg-gray-300 rounded-[50%] flex justify-center items-center text-[100px] mt-6 border-8 border-gray-600 text-gray-600">
      <% if current_user.profile_picture.attached? %>
        <%= image_tag(current_user.profile_picture, class: 'rounded-[50%] absolute top-0 bottom-0 left-0 right-0 w-full h-full object-cover object-center') %>
      <% else %>
        <%= current_user.initials %>
      <% end %>
    </div>
    <div class="flex justify-center items-center mt-6 border-1 border-gray-600">
      <div class="py-4 whitespace-nowrap text-lg">User ID: <%= current_user.id %></div>
    </div>    

    <%= form_with(model: @user, id: 'profile-picture-form') do |form| %>
      <div class="w-full flex justify-center mt-4">
        <input type="button" value="<%= current_user.profile_picture.attached? ? "Change Picture" : 'Upload Picture' %>" onclick="document.getElementById('profile-picture-field').click();" class="inline-flex items-center px-2.5 py-1.5 border border-transparent text-lg font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" />
        <%= form.file_field :profile_picture, id: 'profile-picture-field', class: 'hidden' %>
      </div>
    <% end %>
  </div>
</div>


<script>
  document.getElementById("profile-picture-field").onchange = function() {
    document.getElementById("profile-picture-form").submit();
  };
</script>
